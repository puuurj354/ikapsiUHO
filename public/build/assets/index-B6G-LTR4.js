import{a as x,u as w,j as e,H as Y,L as Z,r as h}from"./app-BKRy0xS9.js";import{I as n,U as ee}from"./icon-4uln7NLJ.js";import{A as ae,a as se,b as te,c as re,d as ie,e as le,f as ne,g as de}from"./alert-dialog-wSl33Suh.js";import{B as S}from"./badge-DLgejOhi.js";import{B as d}from"./createLucideIcon-DRZAN04P.js";import{C as E,a as F,b as ce,c as oe,d as me}from"./card-ClEbM8j1.js";import{D as P,a as A,b as M,c as I,d as B,e as T}from"./dialog-B2zZYt0-.js";import{A as xe,D as he,a as pe,b as ue,c as D,d as ge}from"./app-layout-Cr8wGsqI.js";import{I as i}from"./input-C-hUoTuv.js";import{L as r}from"./label-Ceh4pQMy.js";import{S as je,a as ve,b as Ne,c as fe,d as _}from"./select-HCEhiRej.js";import{T as L}from"./textarea-DgLmXbp9.js";import{C as be,E as De,T as _e}from"./trash-Dd6ueXhi.js";import{C as q}from"./calendar-BKSOro36.js";import{E as Ce}from"./eye-MIwtmLE6.js";import{P as ye}from"./pencil-HMcXzFky.js";import{M as ke}from"./map-pin-qLZhgeZ9.js";/* empty css            */import"./index-rnnhP578.js";import"./index-CnLkvw5W.js";import"./index-BgFZ9flG.js";import"./index-BHKeP1EC.js";import"./index-4Ns3tNZl.js";import"./app-logo-icon-CQnxFW4t.js";import"./loader-circle-lND-oVAd.js";import"./index-Ch2-IgC7.js";import"./chevron-down-CAgCK0qv.js";function ea({events:l,filters:C}){const H=[{title:"Dashboard Admin",href:"/admin/dashboard"},{title:"Manajemen Event",href:"/admin/events"}],[O,p]=x.useState(!1),[N,u]=x.useState(null),[g,f]=x.useState(null),[j,R]=x.useState(C.search||""),[c,U]=x.useState(C.status||"all"),[y,b]=x.useState(null),[k,v]=x.useState(null),t=w({title:"",description:"",location:"",event_date:"",registration_deadline:"",max_participants:"",is_published:!1,image:null}),s=w({title:"",description:"",location:"",event_date:"",registration_deadline:"",max_participants:"",is_published:!1,image:null}),V=a=>{R(a),h.get("/admin/events",{search:a,status:c!=="all"?c:void 0},{preserveState:!0,replace:!0})},z=a=>{U(a),h.get("/admin/events",{search:j,status:a!=="all"?a:void 0},{preserveState:!0,replace:!0})},K=a=>{a.preventDefault(),t.post("/admin/events",{preserveScroll:!0,onSuccess:()=>{t.reset(),p(!1),b(null)}})},$=a=>{a.preventDefault(),N&&s.post(`/admin/events/${N.id}`,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{s.reset(),u(null),v(null)}})},G=()=>{g&&h.delete(`/admin/events/${g.id}`,{preserveScroll:!0,onSuccess:()=>{f(null)}})},J=a=>{u(a),v(a.image||null),s.setData({title:a.title,description:a.description,location:a.location,event_date:new Date(a.event_date).toISOString().slice(0,16),registration_deadline:new Date(a.registration_deadline).toISOString().slice(0,16),max_participants:a.max_participants?.toString()||"",is_published:a.is_published,image:null})},Q=a=>{const o=a.target.files?.[0];if(o){t.setData("image",o);const m=new FileReader;m.onloadend=()=>{b(m.result)},m.readAsDataURL(o)}},W=a=>{const o=a.target.files?.[0];if(o){s.setData("image",o);const m=new FileReader;m.onloadend=()=>{v(m.result)},m.readAsDataURL(o)}},X=a=>new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(xe,{breadcrumbs:H,children:[e.jsx(Y,{title:"Manajemen Event"}),e.jsxs("div",{className:"container mx-auto space-y-8 py-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Manajemen Event"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Kelola event dan kegiatan alumni"})]}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-1 gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(i,{placeholder:"Cari judul atau lokasi event...",value:j,onChange:a=>V(a.target.value)})}),e.jsxs(je,{value:c,onValueChange:z,children:[e.jsx(ve,{className:"w-[180px]",children:e.jsx(Ne,{placeholder:"Semua Status"})}),e.jsxs(fe,{children:[e.jsx(_,{value:"all",children:"Semua Status"}),e.jsx(_,{value:"published",children:"Published"}),e.jsx(_,{value:"draft",children:"Draft"})]})]})]}),e.jsxs(d,{onClick:()=>p(!0),children:[e.jsx(n,{iconNode:be,className:"mr-2 h-4 w-4"}),"Buat Event"]})]}),l.data.length===0?e.jsx(E,{children:e.jsx(F,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(q,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"Belum ada event"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Mulai dengan membuat event pertama Anda"})]})})}):e.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:l.data.map(a=>e.jsxs(E,{className:"overflow-hidden",children:[a.image&&e.jsx("div",{className:"aspect-video w-full overflow-hidden bg-muted",children:e.jsx("img",{src:a.image,alt:a.title,className:"h-full w-full object-cover"})}),e.jsxs(ce,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx(oe,{className:"line-clamp-2 text-xl",children:a.title}),e.jsxs(he,{children:[e.jsx(pe,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"icon",children:e.jsx(n,{iconNode:De,className:"h-4 w-4"})})}),e.jsxs(ue,{align:"end",children:[e.jsx(D,{asChild:!0,children:e.jsxs(Z,{href:`/admin/events/${a.id}/registrations`,children:[e.jsx(n,{iconNode:Ce,className:"mr-2 h-4 w-4"}),"Lihat Pendaftar"]})}),e.jsxs(D,{onClick:()=>J(a),children:[e.jsx(n,{iconNode:ye,className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsx(ge,{}),e.jsxs(D,{onClick:()=>f(a),className:"text-red-600 dark:text-red-400",children:[e.jsx(n,{iconNode:_e,className:"mr-2 h-4 w-4"}),"Hapus"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{variant:a.is_published?"default":"secondary",children:a.is_published?"Published":"Draft"}),a.max_participants&&e.jsxs(S,{variant:"outline",children:[e.jsx(n,{iconNode:ee,className:"mr-1 h-3 w-3"}),a.registrations_count,"/",a.max_participants]})]})]}),e.jsxs(F,{className:"space-y-3",children:[e.jsx(me,{className:"line-clamp-2",children:a.description}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(n,{iconNode:q,className:"h-4 w-4"}),e.jsx("span",{children:X(a.event_date)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(n,{iconNode:ke,className:"h-4 w-4"}),e.jsx("span",{className:"line-clamp-1",children:a.location})]})]})]})]},a.id))}),l.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Menampilkan ",l.data.length," dari ",l.total," ","event"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:"outline",size:"sm",disabled:l.current_page===1,onClick:()=>h.get("/admin/events",{page:l.current_page-1,search:j,status:c!=="all"?c:void 0},{preserveState:!0}),children:"Sebelumnya"}),e.jsx(d,{variant:"outline",size:"sm",disabled:l.current_page===l.last_page,onClick:()=>h.get("/admin/events",{page:l.current_page+1,search:j,status:c!=="all"?c:void 0},{preserveState:!0}),children:"Selanjutnya"})]})]})]}),e.jsx(P,{open:O,onOpenChange:p,children:e.jsxs(A,{className:"max-h-[90vh] max-w-2xl overflow-y-auto",children:[e.jsxs(M,{children:[e.jsx(I,{children:"Buat Event Baru"}),e.jsx(B,{children:"Isi form di bawah untuk membuat event baru"})]}),e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"create-title",children:["Judul Event"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{id:"create-title",value:t.data.title,onChange:a=>t.setData("title",a.target.value),required:!0}),t.errors.title&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t.errors.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"create-description",children:["Deskripsi"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(L,{id:"create-description",value:t.data.description,onChange:a=>t.setData("description",a.target.value),rows:4,required:!0}),t.errors.description&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t.errors.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"create-location",children:["Lokasi ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{id:"create-location",value:t.data.location,onChange:a=>t.setData("location",a.target.value),required:!0}),t.errors.location&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t.errors.location})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"create-event-date",children:["Tanggal Event"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{id:"create-event-date",type:"datetime-local",value:t.data.event_date,onChange:a=>t.setData("event_date",a.target.value),required:!0}),t.errors.event_date&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t.errors.event_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"create-deadline",children:["Batas Pendaftaran"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{id:"create-deadline",type:"datetime-local",value:t.data.registration_deadline,onChange:a=>t.setData("registration_deadline",a.target.value),required:!0}),t.errors.registration_deadline&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t.errors.registration_deadline})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"create-max-participants",children:"Maksimal Peserta (opsional)"}),e.jsx(i,{id:"create-max-participants",type:"number",min:"1",value:t.data.max_participants,onChange:a=>t.setData("max_participants",a.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Kosongkan untuk unlimited peserta"}),t.errors.max_participants&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t.errors.max_participants})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"create-image",children:"Gambar Event (opsional)"}),e.jsx(i,{id:"create-image",type:"file",accept:"image/*",onChange:Q}),y&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:y,alt:"Preview",className:"h-48 w-full rounded-md object-cover"})}),t.errors.image&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t.errors.image})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"create-is-published",checked:t.data.is_published,onChange:a=>t.setData("is_published",a.target.checked),className:"h-4 w-4 rounded border-gray-300"}),e.jsx(r,{htmlFor:"create-is-published",className:"cursor-pointer",children:"Publish event sekarang"})]}),e.jsxs(T,{children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>{p(!1),b(null)},disabled:t.processing,children:"Batal"}),e.jsx(d,{type:"submit",disabled:t.processing,children:t.processing?"Menyimpan...":"Buat Event"})]})]})]})}),e.jsx(P,{open:!!N,onOpenChange:()=>u(null),children:e.jsxs(A,{className:"max-h-[90vh] max-w-2xl overflow-y-auto",children:[e.jsxs(M,{children:[e.jsx(I,{children:"Edit Event"}),e.jsx(B,{children:"Perbarui informasi event"})]}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"edit-title",children:["Judul Event"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{id:"edit-title",value:s.data.title,onChange:a=>s.setData("title",a.target.value),required:!0}),s.errors.title&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s.errors.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"edit-description",children:["Deskripsi"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(L,{id:"edit-description",value:s.data.description,onChange:a=>s.setData("description",a.target.value),rows:4,required:!0}),s.errors.description&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s.errors.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"edit-location",children:["Lokasi ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{id:"edit-location",value:s.data.location,onChange:a=>s.setData("location",a.target.value),required:!0}),s.errors.location&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s.errors.location})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"edit-event-date",children:["Tanggal Event"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{id:"edit-event-date",type:"datetime-local",value:s.data.event_date,onChange:a=>s.setData("event_date",a.target.value),required:!0}),s.errors.event_date&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s.errors.event_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"edit-deadline",children:["Batas Pendaftaran"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{id:"edit-deadline",type:"datetime-local",value:s.data.registration_deadline,onChange:a=>s.setData("registration_deadline",a.target.value),required:!0}),s.errors.registration_deadline&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s.errors.registration_deadline})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-max-participants",children:"Maksimal Peserta (opsional)"}),e.jsx(i,{id:"edit-max-participants",type:"number",min:"1",value:s.data.max_participants,onChange:a=>s.setData("max_participants",a.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Kosongkan untuk unlimited peserta"}),s.errors.max_participants&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s.errors.max_participants})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-image",children:"Gambar Event Baru (opsional)"}),e.jsx(i,{id:"edit-image",type:"file",accept:"image/*",onChange:W}),k&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:k,alt:"Preview",className:"h-48 w-full rounded-md object-cover"})}),s.errors.image&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s.errors.image})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"edit-is-published",checked:s.data.is_published,onChange:a=>s.setData("is_published",a.target.checked),className:"h-4 w-4 rounded border-gray-300"}),e.jsx(r,{htmlFor:"edit-is-published",className:"cursor-pointer",children:"Event dipublish"})]}),e.jsxs(T,{children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>{u(null),v(null)},disabled:s.processing,children:"Batal"}),e.jsx(d,{type:"submit",disabled:s.processing,children:s.processing?"Menyimpan...":"Simpan Perubahan"})]})]})]})}),e.jsx(ae,{open:!!g,onOpenChange:()=>f(null),children:e.jsxs(se,{children:[e.jsxs(te,{children:[e.jsx(re,{children:"Hapus Event"}),e.jsxs(ie,{children:["Apakah Anda yakin ingin menghapus event"," ",e.jsx("strong",{children:g?.title}),"? Semua data pendaftaran juga akan terhapus. Tindakan ini tidak dapat dibatalkan."]})]}),e.jsxs(le,{children:[e.jsx(ne,{children:"Batal"}),e.jsx(de,{onClick:G,className:"bg-red-600 hover:bg-red-700",children:"Hapus"})]})]})})]})}export{ea as default};
