import{a as h,u as M,j as e,H as Q,r as j}from"./app-fhj7gZzm.js";import{I as D}from"./icon-DK-hjEL6.js";import{A as W,a as X,b as Y,c as Z,d as ee,e as ae,f as se,g as re}from"./alert-dialog-BFQXfewG.js";import{B as m}from"./createLucideIcon-Bxc6ksgw.js";import{D as P,a as I,b as T,c as E,d as L,e as U}from"./dialog-Ch-_C8v3.js";import{A as te,D as le,a as ne,b as ie,c as B,d as de}from"./app-layout-Y4SWPiZg.js";import{I as n}from"./input-U5i6lLuS.js";import{L as t}from"./label-CTzhQIIa.js";import{S as g,a as u,b as f,c as v,d as i}from"./select-CqLeykVc.js";import{T as oe,a as ce,b as F,c as p,d as me,e as x}from"./table-IaX4nrq-.js";import{C as xe,E as pe,T as he}from"./trash-BP1j6379.js";import{P as je}from"./pencil-Qhiv8AF0.js";/* empty css            */import"./index-CO9GJ-js.js";import"./index-3oF6e6FF.js";import"./index-DJTpNQea.js";import"./index-t9tmcEWt.js";import"./index-CrIlxu0V.js";import"./index-BquFZef3.js";import"./index-DgR0ooUQ.js";import"./index-4Ns3tNZl.js";import"./app-logo-icon-e81g94Ch.js";import"./calendar-C2pF0By-.js";import"./image-CJ9NoHzi.js";import"./loader-circle-cJftQ5UR.js";import"./index-CNkP6iOb.js";import"./chevron-down-ebF0x24v.js";function Oe({users:d,filters:C}){const H=[{title:"Dashboard Admin",href:"/admin/dashboard"},{title:"Manajemen Pengguna",href:"/admin/users"}],[V,k]=h.useState(!1),[A,w]=h.useState(null),[b,S]=h.useState(null),[N,R]=h.useState(C.search||""),[o,q]=h.useState(C.role||"all"),[c,O]=h.useState(C.angkatan||"all"),r=M({name:"",email:"",password:"",password_confirmation:"",role:"ALUMNI",angkatan:"",profesi:"",profile_picture:null}),s=M({name:"",email:"",role:"ALUMNI",angkatan:"",profesi:"",password:"",password_confirmation:"",profile_picture:null}),z=a=>{R(a),j.get("/admin/users",{search:a,role:o!=="all"?o:void 0,angkatan:c!=="all"?c:void 0},{preserveState:!0,replace:!0})},_=(a,l)=>{a==="role"?(q(l),j.get("/admin/users",{search:N,role:l!=="all"?l:void 0,angkatan:c!=="all"?c:void 0},{preserveState:!0,replace:!0})):(O(l),j.get("/admin/users",{search:N,role:o!=="all"?o:void 0,angkatan:l!=="all"?l:void 0},{preserveState:!0,replace:!0}))},K=a=>{a.preventDefault(),r.post("/admin/users",{preserveScroll:!0,onSuccess:()=>{r.reset(),k(!1)}})},$=a=>{a.preventDefault(),A&&s.post(`/admin/users/${A.id}`,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{s.reset(),w(null)}})},G=()=>{b&&j.delete(`/admin/users/${b.id}`,{preserveScroll:!0,onSuccess:()=>{S(null)}})},J=a=>{w(a),s.setData({name:a.name,email:a.email,role:a.role,angkatan:a.angkatan?.toString()||"",profesi:a.profesi||"",password:"",password_confirmation:"",profile_picture:null})},y=Array.from({length:26},(a,l)=>2025-l);return e.jsxs(te,{breadcrumbs:H,children:[e.jsx(Q,{title:"Manajemen Pengguna"}),e.jsxs("div",{className:"container mx-auto space-y-8 py-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Manajemen Pengguna"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Kelola data pengguna dan hak akses sistem"})]}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-1 gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(n,{placeholder:"Cari nama atau email...",value:N,onChange:a=>z(a.target.value)})}),e.jsxs(g,{value:o,onValueChange:a=>_("role",a),children:[e.jsx(u,{className:"w-[180px]",children:e.jsx(f,{placeholder:"Semua Role"})}),e.jsxs(v,{children:[e.jsx(i,{value:"all",children:"Semua Role"}),e.jsx(i,{value:"ADMIN",children:"Admin"}),e.jsx(i,{value:"ALUMNI",children:"Alumni"})]})]}),e.jsxs(g,{value:c,onValueChange:a=>_("angkatan",a),children:[e.jsx(u,{className:"w-[180px]",children:e.jsx(f,{placeholder:"Semua Angkatan"})}),e.jsxs(v,{children:[e.jsx(i,{value:"all",children:"Semua Angkatan"}),y.map(a=>e.jsxs(i,{value:a.toString(),children:["Angkatan ",a]},a))]})]})]}),e.jsxs(m,{onClick:()=>k(!0),children:[e.jsx(D,{iconNode:xe,className:"mr-2 h-4 w-4"}),"Tambah Pengguna"]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(oe,{children:[e.jsx(ce,{children:e.jsxs(F,{children:[e.jsx(p,{className:"w-[80px]",children:"Foto"}),e.jsx(p,{children:"Nama"}),e.jsx(p,{children:"Email"}),e.jsx(p,{children:"Role"}),e.jsx(p,{children:"Angkatan"}),e.jsx(p,{children:"Profesi"}),e.jsx(p,{className:"w-[80px]",children:"Aksi"})]})}),e.jsx(me,{children:d.data.length===0?e.jsx(F,{children:e.jsx(x,{colSpan:7,className:"h-24 text-center",children:"Tidak ada data pengguna"})}):d.data.map(a=>e.jsxs(F,{children:[e.jsx(x,{children:e.jsx("img",{src:a.profile_picture_url,alt:a.name,className:"h-10 w-10 rounded-full object-cover"})}),e.jsx(x,{className:"font-medium",children:a.name}),e.jsx(x,{children:a.email}),e.jsx(x,{children:e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold ${a.role==="ADMIN"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}`,children:a.role})}),e.jsx(x,{children:a.angkatan||"-"}),e.jsx(x,{children:a.profesi||"-"}),e.jsx(x,{children:e.jsxs(le,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",children:e.jsx(D,{iconNode:pe,className:"h-4 w-4"})})}),e.jsxs(ie,{align:"end",children:[e.jsxs(B,{onClick:()=>J(a),children:[e.jsx(D,{iconNode:je,className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsx(de,{}),e.jsxs(B,{onClick:()=>S(a),className:"text-red-600 dark:text-red-400",children:[e.jsx(D,{iconNode:he,className:"mr-2 h-4 w-4"}),"Hapus"]})]})]})})]},a.id))})]})}),d.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Menampilkan ",d.data.length," dari ",d.total," ","pengguna"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",disabled:d.current_page===1,onClick:()=>j.get("/admin/users",{page:d.current_page-1,search:N,role:o!=="all"?o:void 0,angkatan:c!=="all"?c:void 0},{preserveState:!0}),children:"Sebelumnya"}),e.jsx(m,{variant:"outline",size:"sm",disabled:d.current_page===d.last_page,onClick:()=>j.get("/admin/users",{page:d.current_page+1,search:N,role:o!=="all"?o:void 0,angkatan:c!=="all"?c:void 0},{preserveState:!0}),children:"Selanjutnya"})]})]})]}),e.jsx(P,{open:V,onOpenChange:k,children:e.jsxs(I,{className:"max-h-[90vh] max-w-2xl overflow-y-auto",children:[e.jsxs(T,{children:[e.jsx(E,{children:"Tambah Pengguna Baru"}),e.jsx(L,{children:"Isi form di bawah untuk menambahkan pengguna baru"})]}),e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"create-name",children:"Nama Lengkap"}),e.jsx(n,{id:"create-name",value:r.data.name,onChange:a=>r.setData("name",a.target.value),required:!0}),r.errors.name&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r.errors.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"create-email",children:"Email"}),e.jsx(n,{id:"create-email",type:"email",value:r.data.email,onChange:a=>r.setData("email",a.target.value),required:!0}),r.errors.email&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r.errors.email})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"create-password",children:"Password"}),e.jsx(n,{id:"create-password",type:"password",value:r.data.password,onChange:a=>r.setData("password",a.target.value),required:!0}),r.errors.password&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r.errors.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"create-password-confirmation",children:"Konfirmasi Password"}),e.jsx(n,{id:"create-password-confirmation",type:"password",value:r.data.password_confirmation,onChange:a=>r.setData("password_confirmation",a.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"create-role",children:"Role"}),e.jsxs(g,{value:r.data.role,onValueChange:a=>r.setData("role",a),children:[e.jsx(u,{children:e.jsx(f,{})}),e.jsxs(v,{children:[e.jsx(i,{value:"ADMIN",children:"Admin"}),e.jsx(i,{value:"ALUMNI",children:"Alumni"})]})]}),r.errors.role&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r.errors.role})]}),r.data.role==="ALUMNI"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"create-angkatan",children:"Angkatan"}),e.jsxs(g,{value:r.data.angkatan,onValueChange:a=>r.setData("angkatan",a),children:[e.jsx(u,{children:e.jsx(f,{placeholder:"Pilih angkatan"})}),e.jsx(v,{children:y.map(a=>e.jsx(i,{value:a.toString(),children:a},a))})]}),r.errors.angkatan&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r.errors.angkatan})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"create-profesi",children:"Profesi"}),e.jsx(n,{id:"create-profesi",value:r.data.profesi,onChange:a=>r.setData("profesi",a.target.value)}),r.errors.profesi&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r.errors.profesi})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"create-profile-picture",children:"Foto Profil"}),e.jsx(n,{id:"create-profile-picture",type:"file",accept:"image/*",onChange:a=>{const l=a.target.files?.[0];l&&r.setData("profile_picture",l)}}),r.errors.profile_picture&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r.errors.profile_picture})]}),e.jsxs(U,{children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>k(!1),disabled:r.processing,children:"Batal"}),e.jsx(m,{type:"submit",disabled:r.processing,children:r.processing?"Menyimpan...":"Simpan"})]})]})]})}),e.jsx(P,{open:!!A,onOpenChange:()=>w(null),children:e.jsxs(I,{className:"max-h-[90vh] max-w-2xl overflow-y-auto",children:[e.jsxs(T,{children:[e.jsx(E,{children:"Edit Pengguna"}),e.jsx(L,{children:"Perbarui informasi pengguna"})]}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit-name",children:"Nama Lengkap"}),e.jsx(n,{id:"edit-name",value:s.data.name,onChange:a=>s.setData("name",a.target.value),required:!0}),s.errors.name&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s.errors.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit-email",children:"Email"}),e.jsx(n,{id:"edit-email",type:"email",value:s.data.email,onChange:a=>s.setData("email",a.target.value),required:!0}),s.errors.email&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s.errors.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit-role",children:"Role"}),e.jsxs(g,{value:s.data.role,onValueChange:a=>s.setData("role",a),children:[e.jsx(u,{children:e.jsx(f,{})}),e.jsxs(v,{children:[e.jsx(i,{value:"ADMIN",children:"Admin"}),e.jsx(i,{value:"ALUMNI",children:"Alumni"})]})]}),s.errors.role&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s.errors.role})]}),s.data.role==="ALUMNI"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit-angkatan",children:"Angkatan"}),e.jsxs(g,{value:s.data.angkatan,onValueChange:a=>s.setData("angkatan",a),children:[e.jsx(u,{children:e.jsx(f,{placeholder:"Pilih angkatan"})}),e.jsx(v,{children:y.map(a=>e.jsx(i,{value:a.toString(),children:a},a))})]}),s.errors.angkatan&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s.errors.angkatan})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit-profesi",children:"Profesi"}),e.jsx(n,{id:"edit-profesi",value:s.data.profesi,onChange:a=>s.setData("profesi",a.target.value)}),s.errors.profesi&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s.errors.profesi})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit-password",children:"Password Baru (opsional)"}),e.jsx(n,{id:"edit-password",type:"password",value:s.data.password,onChange:a=>s.setData("password",a.target.value)}),s.errors.password&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s.errors.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit-password-confirmation",children:"Konfirmasi Password"}),e.jsx(n,{id:"edit-password-confirmation",type:"password",value:s.data.password_confirmation,onChange:a=>s.setData("password_confirmation",a.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit-profile-picture",children:"Foto Profil Baru (opsional)"}),e.jsx(n,{id:"edit-profile-picture",type:"file",accept:"image/*",onChange:a=>{const l=a.target.files?.[0];l&&s.setData("profile_picture",l)}}),s.errors.profile_picture&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s.errors.profile_picture})]}),e.jsxs(U,{children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>w(null),disabled:s.processing,children:"Batal"}),e.jsx(m,{type:"submit",disabled:s.processing,children:s.processing?"Menyimpan...":"Simpan Perubahan"})]})]})]})}),e.jsx(W,{open:!!b,onOpenChange:()=>S(null),children:e.jsxs(X,{children:[e.jsxs(Y,{children:[e.jsx(Z,{children:"Hapus Pengguna"}),e.jsxs(ee,{children:["Apakah Anda yakin ingin menghapus pengguna"," ",e.jsx("strong",{children:b?.name}),"? Tindakan ini tidak dapat dibatalkan."]})]}),e.jsxs(ae,{children:[e.jsx(se,{children:"Batal"}),e.jsx(re,{onClick:G,className:"bg-red-600 hover:bg-red-700",children:"Hapus"})]})]})})]})}export{Oe as default};
