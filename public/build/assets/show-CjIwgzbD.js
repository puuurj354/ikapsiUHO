import{a as m,j as s,H as E,r as f}from"./app-BAF-BPZS.js";import{I as i,U as K}from"./icon-BHbPAhgn.js";import{A as N,a as b,b as k,c as _,d as C,e as D,f as w,g as A}from"./alert-dialog-POFoqK_W.js";import{B as n}from"./badge-ZX4GsAPn.js";import{B as t}from"./createLucideIcon-BTjbpmqX.js";import{C as x,b as h,c as p,a as j,d as H}from"./card-DsWPu2kW.js";import{A as O}from"./app-layout-C-QvOu69.js";import{A as M}from"./arrow-left-Cah4XsZa.js";import{C as R}from"./circle-check-big-B58v-LbL.js";import{C as L}from"./calendar-D0gpj7Zh.js";import{C as U}from"./clock-CslZUQaT.js";import{M as $}from"./map-pin-_a0b2voY.js";import{C as F}from"./circle-x-Dai4qVo4.js";/* empty css            */import"./index-EAFyNT2o.js";import"./index-CI_V_ysi.js";import"./index-B5hQzxUs.js";import"./index-DgxXyP0T.js";import"./index-4Ns3tNZl.js";import"./app-logo-icon-Cl2KKFNW.js";import"./loader-circle-CW2EZiJ2.js";function ms({event:e}){const y=[{title:"Dashboard",href:"/dashboard"},{title:"Event & Kegiatan",href:"/events"},{title:e.title,href:`/events/${e.id}`}],[v,d]=m.useState(!1),[P,c]=m.useState(!1),[r,l]=m.useState(!1),u=o=>new Date(o).toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),g=o=>new Date(o).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),a=new Date(e.event_date)>new Date,T=()=>{l(!0),f.post(`/events/${e.id}/register`,{},{preserveScroll:!0,onFinish:()=>{l(!1),d(!1)}})},I=()=>{l(!0),f.post(`/events/${e.id}/cancel`,{},{preserveScroll:!0,onFinish:()=>{l(!1),c(!1)}})},S=a&&!e.is_registered&&!e.is_full&&e.is_registration_open,B=a&&e.is_registered;return s.jsxs(O,{breadcrumbs:y,children:[s.jsx(E,{title:e.title}),s.jsxs("div",{className:"container mx-auto space-y-8 py-8",children:[s.jsx(t,{variant:"ghost",asChild:!0,children:s.jsxs("a",{href:"/events",children:[s.jsx(i,{iconNode:M,className:"mr-2 h-4 w-4"}),"Kembali ke Daftar Event"]})}),s.jsxs("div",{className:"grid gap-8 lg:grid-cols-3",children:[s.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.image&&s.jsx("div",{className:"overflow-hidden rounded-lg",children:s.jsx("img",{src:e.image,alt:e.title,className:"h-auto w-full object-cover"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-2",children:[e.is_registered&&s.jsxs(n,{className:"gap-1",children:[s.jsx(i,{iconNode:R,className:"h-3 w-3"}),"Anda Terdaftar"]}),e.is_full&&s.jsx(n,{variant:"destructive",children:"Kuota Penuh"}),!e.is_registration_open&&a&&s.jsx(n,{variant:"secondary",children:"Pendaftaran Ditutup"}),!a&&s.jsx(n,{variant:"outline",children:"Event Selesai"})]}),s.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:e.title}),s.jsxs("div",{className:"mt-6 space-y-2 text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(i,{iconNode:L,className:"h-5 w-5"}),s.jsx("span",{className:"text-base",children:u(e.event_date)})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(i,{iconNode:U,className:"h-5 w-5"}),s.jsxs("span",{className:"text-base",children:[g(e.event_date)," WIT"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(i,{iconNode:$,className:"h-5 w-5"}),s.jsx("span",{className:"text-base",children:e.location})]}),e.max_participants&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(i,{iconNode:K,className:"h-5 w-5"}),s.jsxs("span",{className:"text-base",children:[e.registrations_count," /"," ",e.max_participants," peserta terdaftar"]})]})]})]}),s.jsxs(x,{children:[s.jsx(h,{children:s.jsx(p,{children:"Tentang Event"})}),s.jsx(j,{children:s.jsx("p",{className:"whitespace-pre-line text-muted-foreground",children:e.description})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(x,{children:[s.jsxs(h,{children:[s.jsx(p,{children:"Pendaftaran"}),s.jsx(H,{children:e.is_registered?"Anda telah terdaftar untuk event ini":"Daftar untuk mengikuti event"})]}),s.jsxs(j,{className:"space-y-4",children:[s.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4",children:[s.jsx("p",{className:"text-sm font-medium",children:"Batas Pendaftaran"}),s.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:u(e.registration_deadline)}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[g(e.registration_deadline)," ","WIT"]})]}),e.max_participants&&s.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4",children:[s.jsx("p",{className:"text-sm font-medium",children:"Kapasitas"}),s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Terdaftar"}),s.jsxs("span",{className:"font-semibold",children:[e.registrations_count," ","/ ",e.max_participants]})]}),s.jsx("div",{className:"mt-2 h-2 overflow-hidden rounded-full bg-muted",children:s.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${Math.min(e.registrations_count/e.max_participants*100,100)}%`}})})]})]}),s.jsxs("div",{className:"space-y-2",children:[S&&s.jsx(t,{className:"w-full",onClick:()=>d(!0),children:"Daftar Event Ini"}),B&&s.jsxs(t,{className:"w-full",variant:"destructive",onClick:()=>c(!0),children:[s.jsx(i,{iconNode:F,className:"mr-2 h-4 w-4"}),"Batalkan Pendaftaran"]}),!a&&s.jsx(t,{className:"w-full",disabled:!0,children:"Event Telah Selesai"}),a&&!e.is_registered&&e.is_full&&s.jsx(t,{className:"w-full",disabled:!0,children:"Kuota Penuh"}),a&&!e.is_registered&&!e.is_full&&!e.is_registration_open&&s.jsx(t,{className:"w-full",disabled:!0,children:"Pendaftaran Ditutup"})]})]})]}),s.jsxs(x,{children:[s.jsx(h,{children:s.jsx(p,{children:"Informasi Tambahan"})}),s.jsxs(j,{className:"space-y-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Syarat & Ketentuan:"}),s.jsxs("ul",{className:"mt-2 list-inside list-disc space-y-1 text-muted-foreground",children:[s.jsx("li",{children:"Alumni Psikologi UHO"}),s.jsx("li",{children:"Harap datang tepat waktu"}),s.jsx("li",{children:"Mengikuti protokol kesehatan"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Kontak:"}),s.jsx("p",{className:"mt-1 text-muted-foreground",children:"Hubungi panitia jika ada pertanyaan"})]})]})]})]})]})]}),s.jsx(N,{open:v,onOpenChange:d,children:s.jsxs(b,{children:[s.jsxs(k,{children:[s.jsx(_,{children:"Konfirmasi Pendaftaran"}),s.jsxs(C,{children:["Apakah Anda yakin ingin mendaftar untuk event"," ",s.jsx("strong",{children:e.title}),"?",s.jsx("br",{}),s.jsx("br",{}),"Anda akan menerima konfirmasi melalui email setelah mendaftar."]})]}),s.jsxs(D,{children:[s.jsx(w,{disabled:r,children:"Batal"}),s.jsx(A,{onClick:T,disabled:r,children:r?"Memproses...":"Ya, Daftar"})]})]})}),s.jsx(N,{open:P,onOpenChange:c,children:s.jsxs(b,{children:[s.jsxs(k,{children:[s.jsx(_,{children:"Batalkan Pendaftaran"}),s.jsxs(C,{children:["Apakah Anda yakin ingin membatalkan pendaftaran untuk event ",s.jsx("strong",{children:e.title}),"?",s.jsx("br",{}),s.jsx("br",{}),"Anda dapat mendaftar kembali jika kuota masih tersedia."]})]}),s.jsxs(D,{children:[s.jsx(w,{disabled:r,children:"Tidak"}),s.jsx(A,{onClick:I,disabled:r,className:"bg-red-600 hover:bg-red-700",children:r?"Memproses...":"Ya, Batalkan"})]})]})})]})}export{ms as default};
