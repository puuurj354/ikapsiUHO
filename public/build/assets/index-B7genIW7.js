import{a as g,j as e,U as y,H as ie,r as j}from"./app-BgGiJWZR.js";import{h as K,R as le,I as oe,A as ce,D as de,a as me,b as ue,c as v,d as A,e as F,f as I,g as L}from"./app-layout-BJPNvAwu.js";import{B as w}from"./badge-CPU78sSY.js";import{a as k,B as C}from"./createLucideIcon-Dc1Anohq.js";import{C as M,b as xe,c as ge,d as he,a as P}from"./card-B-mkesgN.js";import{u as pe,c as fe,a as T}from"./index-DpF8GL2G.js";import{P as je}from"./index-DFobMs-R.js";import{P as b}from"./index-DzSGn-36.js";import{u as ve,a as be}from"./index-CaQ-zrX1.js";import{F as E}from"./flag-DTZpFRwj.js";import{E as Ne}from"./ellipsis-vertical-DetSxq5V.js";import{E as $}from"./eye-Atjeyg6p.js";import{C as B}from"./circle-check-big-CGe6F_tO.js";import{C as V}from"./circle-x-B6W1SyrD.js";import{T as ye}from"./trash-2-52EJ_H1T.js";import{C as we}from"./clock-Drn2p0hO.js";/* empty css            */import"./icon-DruAsRm4.js";import"./index-4Ns3tNZl.js";import"./app-logo-icon-j-eUwlox.js";import"./calendar-A_z2N1L7.js";import"./loader-circle-CNn74Gm_.js";var N="Tabs",[Ce,Qe]=fe(N,[K]),G=K(),[Te,S]=Ce(N),H=g.forwardRef((s,t)=>{const{__scopeTabs:r,value:n,onValueChange:o,defaultValue:m,orientation:i="horizontal",dir:c,activationMode:h="automatic",...p}=s,d=ve(c),[l,u]=pe({prop:n,onChange:o,defaultProp:m??"",caller:N});return e.jsx(Te,{scope:r,baseId:be(),value:l,onValueChange:u,orientation:i,dir:d,activationMode:h,children:e.jsx(b.div,{dir:d,"data-orientation":i,...p,ref:t})})});H.displayName=N;var U="TabsList",z=g.forwardRef((s,t)=>{const{__scopeTabs:r,loop:n=!0,...o}=s,m=S(U,r),i=G(r);return e.jsx(le,{asChild:!0,...i,orientation:m.orientation,dir:m.dir,loop:n,children:e.jsx(b.div,{role:"tablist","aria-orientation":m.orientation,...o,ref:t})})});z.displayName=U;var q="TabsTrigger",O=g.forwardRef((s,t)=>{const{__scopeTabs:r,value:n,disabled:o=!1,...m}=s,i=S(q,r),c=G(r),h=Q(i.baseId,n),p=W(i.baseId,n),d=n===i.value;return e.jsx(oe,{asChild:!0,...c,focusable:!o,active:d,children:e.jsx(b.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":p,"data-state":d?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:h,...m,ref:t,onMouseDown:T(s.onMouseDown,l=>{!o&&l.button===0&&l.ctrlKey===!1?i.onValueChange(n):l.preventDefault()}),onKeyDown:T(s.onKeyDown,l=>{[" ","Enter"].includes(l.key)&&i.onValueChange(n)}),onFocus:T(s.onFocus,()=>{const l=i.activationMode!=="manual";!d&&!o&&l&&i.onValueChange(n)})})})});O.displayName=q;var X="TabsContent",J=g.forwardRef((s,t)=>{const{__scopeTabs:r,value:n,forceMount:o,children:m,...i}=s,c=S(X,r),h=Q(c.baseId,n),p=W(c.baseId,n),d=n===c.value,l=g.useRef(d);return g.useEffect(()=>{const u=requestAnimationFrame(()=>l.current=!1);return()=>cancelAnimationFrame(u)},[]),e.jsx(je,{present:o||d,children:({present:u})=>e.jsx(b.div,{"data-state":d?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":h,hidden:!u,id:p,tabIndex:0,...i,ref:t,style:{...s.style,animationDuration:l.current?"0s":void 0},children:u&&m})})});J.displayName=X;function Q(s,t){return`${s}-trigger-${t}`}function W(s,t){return`${s}-content-${t}`}var ke=H,Y=z,Z=O,ee=J;const Se=ke,ae=g.forwardRef(({className:s,...t},r)=>e.jsx(Y,{ref:r,className:k("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));ae.displayName=Y.displayName;const f=g.forwardRef(({className:s,...t},r)=>e.jsx(Z,{ref:r,className:k("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t}));f.displayName=Z.displayName;const se=g.forwardRef(({className:s,...t},r)=>e.jsx(ee,{ref:r,className:k("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));se.displayName=ee.displayName;function We({reports:s,activeTab:t}){const[r,n]=y.useState(null),[o,m]=y.useState(""),[i,c]=y.useState(!1),h=[{title:"Dashboard",href:"/dashboard"},{title:"Admin",href:"/admin/dashboard"},{title:"Laporan Forum",href:"/admin/forum/reports"}],p=a=>({spam:"Spam",inappropriate:"Tidak Pantas",offensive:"Menyinggung",harassment:"Pelecehan",other:"Lainnya"})[a]||a,d=a=>{const x={pending:{variant:"default",icon:e.jsx(we,{className:"mr-1 h-3 w-3"})},reviewed:{variant:"secondary",icon:e.jsx($,{className:"mr-1 h-3 w-3"})},resolved:{variant:"outline",icon:e.jsx(B,{className:"mr-1 h-3 w-3"})},rejected:{variant:"destructive",icon:e.jsx(V,{className:"mr-1 h-3 w-3"})}},R=x[a]||x.pending,re={pending:"Menunggu",reviewed:"Ditinjau",resolved:"Selesai",rejected:"Ditolak"};return e.jsxs(w,{variant:R.variant,children:[R.icon,re[a]||a]})},l=a=>a.includes("ForumDiscussion")?"Diskusi":a.includes("ForumReply")?"Balasan":"Konten",u=(a,x)=>{c(!0),j.patch(`/admin/forum/reports/${a}`,{status:x,admin_notes:o||null},{preserveScroll:!0,onFinish:()=>{c(!1),n(null),m("")}})},te=a=>{confirm("Apakah Anda yakin ingin menghapus konten yang dilaporkan? Tindakan ini tidak dapat dibatalkan.")&&(c(!0),j.delete(`/admin/forum/reports/${a}`,{preserveScroll:!0,onFinish:()=>{c(!1),n(null)}}))},ne=a=>{const x=a==="all"?"/admin/forum/reports":`/admin/forum/reports?status=${a}`;j.get(x,{},{preserveScroll:!1})},_=a=>new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),D=a=>a.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2);return e.jsxs(ce,{breadcrumbs:h,children:[e.jsx(ie,{title:"Laporan Forum - Admin"}),e.jsxs("div",{className:"container mx-auto space-y-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Laporan Forum"}),e.jsx("p",{className:"mt-1 text-gray-600",children:"Kelola laporan konten dari pengguna"})]}),e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-card p-4",children:[e.jsx(E,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Laporan"}),e.jsx("p",{className:"text-2xl font-bold",children:s.total})]})]})]}),e.jsxs(Se,{value:t,onValueChange:ne,children:[e.jsxs(ae,{children:[e.jsx(f,{value:"all",children:"Semua"}),e.jsx(f,{value:"pending",children:"Menunggu"}),e.jsx(f,{value:"reviewed",children:"Ditinjau"}),e.jsx(f,{value:"resolved",children:"Selesai"}),e.jsx(f,{value:"rejected",children:"Ditolak"})]}),e.jsx(se,{value:t,className:"mt-6",children:s.data.length>0?e.jsxs("div",{className:"space-y-4",children:[s.data.map(a=>e.jsxs(M,{children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d(a.status),e.jsx(w,{variant:"outline",children:l(a.reportable_type)}),e.jsx(w,{variant:"secondary",children:p(a.reason)})]}),e.jsxs("div",{children:[e.jsx(ge,{className:"text-lg",children:a.reportable.title||"Balasan Forum"}),e.jsxs(he,{children:["Dilaporkan oleh"," ",a.reporter.name," ","•"," ",_(a.created_at)]})]})]}),e.jsxs(de,{children:[e.jsx(me,{asChild:!0,children:e.jsx(C,{variant:"ghost",size:"sm",children:e.jsx(Ne,{className:"h-4 w-4"})})}),e.jsxs(ue,{align:"end",children:[a.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(v,{onClick:()=>{n(a),u(a.id,"reviewed")},children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Tandai Ditinjau"]}),e.jsx(A,{})]}),(a.status==="pending"||a.status==="reviewed")&&e.jsxs(e.Fragment,{children:[e.jsxs(v,{onClick:()=>{n(a),u(a.id,"resolved")},children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Tandai Selesai"]}),e.jsxs(v,{onClick:()=>{n(a),u(a.id,"rejected")},className:"text-amber-600",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Tolak Laporan"]}),e.jsx(A,{}),e.jsxs(v,{onClick:()=>te(a.id),className:"text-red-600",children:[e.jsx(ye,{className:"mr-2 h-4 w-4"}),"Hapus Konten"]})]})]})]})]})}),e.jsxs(P,{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-900/50 dark:bg-red-950/30",children:[e.jsx("p",{className:"mb-2 text-sm font-semibold text-red-900 dark:text-red-100",children:"Konten yang Dilaporkan:"}),e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:a.reportable.content}),a.reportable.user&&e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsxs(F,{className:"h-6 w-6",children:[e.jsx(I,{src:a.reportable.user.profile_picture_url}),e.jsx(L,{children:D(a.reportable.user.name)})]}),e.jsxs("span",{className:"text-sm text-red-700 dark:text-red-300",children:["Dibuat oleh:"," ",a.reportable.user.name]})]})]}),a.description&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Detail Laporan:"}),e.jsx("p",{className:"text-sm text-gray-700",children:a.description})]}),a.reviewer&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Ditinjau oleh:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(F,{className:"h-6 w-6",children:[e.jsx(I,{src:a.reviewer.profile_picture_url}),e.jsx(L,{children:D(a.reviewer.name)})]}),e.jsx("span",{className:"text-sm text-gray-700",children:a.reviewer.name}),a.reviewed_at&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm text-gray-400",children:"•"}),e.jsx("span",{className:"text-sm text-gray-500",children:_(a.reviewed_at)})]})]}),a.admin_notes&&e.jsx("div",{className:"mt-2 rounded-lg border bg-gray-50 p-3",children:e.jsx("p",{className:"text-sm text-gray-700",children:a.admin_notes})})]})]})]},a.id)),s.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between border-t pt-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Halaman ",s.current_page," dari"," ",s.last_page]}),e.jsxs("div",{className:"flex gap-2",children:[s.current_page>1&&e.jsx(C,{variant:"outline",size:"sm",onClick:()=>{const a=new URL(window.location.href);a.searchParams.set("page",(s.current_page-1).toString()),j.get(a.toString())},children:"Sebelumnya"}),s.current_page<s.last_page&&e.jsx(C,{variant:"outline",size:"sm",onClick:()=>{const a=new URL(window.location.href);a.searchParams.set("page",(s.current_page+1).toString()),j.get(a.toString())},children:"Selanjutnya"})]})]})]}):e.jsx(M,{children:e.jsx(P,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-lg font-semibold text-gray-900",children:"Tidak Ada Laporan"}),e.jsx("p",{className:"mt-1 text-gray-500",children:t==="all"?"Belum ada laporan yang masuk.":`Tidak ada laporan dengan status "${t}".`})]})})})})]})]})]})}export{We as default};
