import{u as C,a as F,j as e,H as S,r as w}from"./app-B2uLdC5s.js";import{B as u}from"./createLucideIcon-BXyHzq-F.js";import{C as c,b as m,c as p,d as x,a as h}from"./card-te4fvd2J.js";import{I as j}from"./input-B4M7mg2k.js";import{L as l}from"./label-Cau27ksP.js";import{S as P,a as A,b as I,c as G,d as b}from"./select-CJ5NSZ1r.js";import{T as D}from"./textarea-BJiCB0Tb.js";import{A as E}from"./app-layout-jJdAK6Sy.js";import{U as M}from"./upload-PKTlzAss.js";import{C as T}from"./circle-alert-C8A9mrku.js";import{I as B}from"./image-D3sFOeB3.js";import{S as H}from"./save-B6QsdxLq.js";/* empty css            */import"./index-CHAcdM8o.js";import"./index-B0iNKQe2.js";import"./index-BFbh2RP3.js";import"./index-DbG0MvhG.js";import"./index-MuU6l8lt.js";import"./index-COMubWJf.js";import"./chevron-down-CqcnpaRK.js";import"./index-BiIr_T_F.js";import"./index-BrtU9OXb.js";import"./icon-CEZUC61e.js";import"./index-4Ns3tNZl.js";import"./app-logo-icon-ghPTRdhp.js";import"./calendar-ZC1vRAIi.js";import"./loader-circle-zUgBhIy_.js";function me({gallery:a}){const f=[{title:"Dashboard",href:"/dashboard"},{title:"Galeri Saya",href:"/gallery"},{title:"Edit Foto",href:`/gallery/${a.id}/edit`}],{data:i,setData:r,post:g,processing:d,errors:t}=C({title:a.title,description:a.description||"",image:null,batch:a.batch||"",type:a.type,_method:"PATCH"}),[v,N]=F.useState(null),y=s=>{const n=s.target.files?.[0];if(n){r("image",n);const o=new FileReader;o.onloadend=()=>{N(o.result)},o.readAsDataURL(n)}},k=s=>{s.preventDefault(),g(`/gallery/${a.id}`,{preserveScroll:!0})};return e.jsxs(E,{breadcrumbs:f,children:[e.jsx(S,{title:"Edit Foto"}),e.jsxs("div",{className:"mx-auto w-full max-w-3xl space-y-6 px-4 py-6 md:px-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Edit Foto"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Perbarui informasi foto Anda"})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs(c,{children:[e.jsxs(m,{children:[e.jsx(p,{children:"Foto Saat Ini"}),e.jsx(x,{children:"Foto yang sedang ditampilkan"})]}),e.jsx(h,{children:e.jsx("div",{className:"relative aspect-video w-full overflow-hidden rounded-lg bg-muted",children:e.jsx("img",{src:v||a.image_url,alt:a.title,className:"h-full w-full object-cover"})})})]}),e.jsxs(c,{children:[e.jsxs(m,{children:[e.jsx(p,{children:"Ganti Foto (Opsional)"}),e.jsx(x,{children:"Pilih foto baru jika ingin mengganti (Max 5MB)"})]}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("label",{htmlFor:"image-upload",className:"flex h-32 w-full cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-muted-foreground/25 bg-muted/50 transition-colors hover:border-muted-foreground/50 hover:bg-muted",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(M,{className:"mb-2 h-8 w-8 text-muted-foreground"}),e.jsx("p",{className:"mb-1 text-sm text-muted-foreground",children:e.jsx("span",{className:"font-semibold",children:"Klik untuk unggah foto baru"})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, GIF (MAX. 5MB)"})]}),e.jsx("input",{id:"image-upload",type:"file",className:"hidden",accept:"image/*",onChange:y})]})}),t.image&&e.jsx("p",{className:"text-sm text-destructive",children:t.image})]})})]}),e.jsxs(c,{children:[e.jsxs(m,{children:[e.jsx(p,{children:"Informasi Foto"}),e.jsx(x,{children:"Perbarui detail tentang foto"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"title",children:["Judul"," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(j,{id:"title",placeholder:"Contoh: Wisuda Angkatan 2023",value:i.title,onChange:s=>r("title",s.target.value),className:t.title?"border-destructive":""}),t.title&&e.jsx("p",{className:"text-sm text-destructive",children:t.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description",children:"Deskripsi (Opsional)"}),e.jsx(D,{id:"description",placeholder:"Ceritakan lebih lanjut tentang foto ini...",value:i.description,onChange:s=>r("description",s.target.value),rows:4,className:t.description?"border-destructive":""}),t.description&&e.jsx("p",{className:"text-sm text-destructive",children:t.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"batch",children:"Angkatan (Opsional)"}),e.jsx(j,{id:"batch",placeholder:"Contoh: 2023",value:i.batch,onChange:s=>r("batch",s.target.value),className:t.batch?"border-destructive":""}),t.batch&&e.jsx("p",{className:"text-sm text-destructive",children:t.batch})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"type",children:["Tipe Galeri"," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(P,{value:i.type,onValueChange:s=>r("type",s),children:[e.jsx(A,{className:t.type?"border-destructive":"",children:e.jsx(I,{})}),e.jsxs(G,{children:[e.jsx(b,{value:"personal",children:"Pribadi - Hanya bisa dilihat oleh saya"}),e.jsx(b,{value:"public",children:"Publik - Akan ditampilkan di galeri publik (perlu persetujuan admin)"})]})]}),t.type&&e.jsx("p",{className:"text-sm text-destructive",children:t.type}),i.type==="public"&&a.type==="personal"&&e.jsxs("div",{className:"flex gap-2 rounded-md border border-blue-200 bg-blue-50 p-3",children:[e.jsx(T,{className:"mt-0.5 h-5 w-5 shrink-0 text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Perhatian"}),e.jsx("p",{className:"text-sm text-blue-800",children:"Mengubah tipe dari Pribadi ke Publik akan memerlukan persetujuan admin sebelum foto ditampilkan di galeri publik."})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>w.visit("/gallery"),disabled:d,children:"Batal"}),e.jsx(u,{type:"submit",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"mr-2 h-4 w-4 animate-spin"}),"Menyimpan..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Simpan Perubahan"]})})]})]})]})]})}export{me as default};
