import{a as F,j as a,F as U,c as B,u as z,H as K,L as O}from"./app-C7ulau2S.js";import{q as x,a as R}from"./index-4Ns3tNZl.js";import{H as C,S as G}from"./layout-DWUF6dyw.js";import{I as h}from"./input-error-BwNE60UF.js";import{c as Y,B as f}from"./createLucideIcon-DNqr8PXk.js";import{D as M,f as V,a as $,c as J,d as X,e as W,g as Z}from"./dialog-DgmyYzv_.js";import{I as j}from"./input-CCZLM2id.js";import{L as p}from"./label-DGYHnA3G.js";import{A as ee,q as ae,e as re,f as te,g as se,X as ie}from"./app-layout-DwHYFsiI.js";import{S as le,a as ne,b as oe,c as de,d as me}from"./select-BJU3dnrm.js";import{T as ue}from"./textarea--oZ0loS-.js";import{z as ce}from"./transition-CsK6ADIx.js";/* empty css            */import"./separator-Bb3yu7MW.js";import"./index-BDU5spvr.js";import"./index-GCxOYPMd.js";import"./index-DGd_EL3L.js";import"./index-B46p3jne.js";import"./index-BgeoTbRy.js";import"./index-D7ypcLOt.js";import"./index-BXAbjfWu.js";import"./icon-qyTAb4TV.js";import"./app-logo-icon-DqPjy_fp.js";import"./calendar-6eAm803K.js";import"./loader-circle-CA_gKxai.js";import"./index-oNbP9vv8.js";import"./chevron-down-DU5DzfYn.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],pe=Y("Upload",he),n=e=>({url:n.url(e),method:"get"});n.definition={methods:["get","head"],url:"/settings/profile"};n.url=e=>n.definition.url+x(e);n.get=e=>({url:n.url(e),method:"get"});n.head=e=>({url:n.url(e),method:"head"});const b=e=>({action:n.url(e),method:"get"});b.get=e=>({action:n.url(e),method:"get"});b.head=e=>({action:n.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});n.form=b;const d=e=>({url:d.url(e),method:"patch"});d.definition={methods:["patch"],url:"/settings/profile"};d.url=e=>d.definition.url+x(e);d.patch=e=>({url:d.url(e),method:"patch"});const P=e=>({action:d.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...e?.query??e?.mergeQuery??{}}}),method:"post"});P.patch=e=>({action:d.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...e?.query??e?.mergeQuery??{}}}),method:"post"});d.form=P;const m=e=>({url:m.url(e),method:"delete"});m.definition={methods:["delete"],url:"/settings/profile"};m.url=e=>m.definition.url+x(e);m.delete=e=>({url:m.url(e),method:"delete"});const S=e=>({action:m.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...e?.query??e?.mergeQuery??{}}}),method:"post"});S.delete=e=>({action:m.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...e?.query??e?.mergeQuery??{}}}),method:"post"});m.form=S;const w={update:d,destroy:m},i=e=>({url:i.url(e),method:"get"});i.definition={methods:["get","head"],url:"/verify-email"};i.url=e=>i.definition.url+x(e);i.get=e=>({url:i.url(e),method:"get"});i.head=e=>({url:i.url(e),method:"head"});const N=e=>({action:i.url(e),method:"get"});N.get=e=>({action:i.url(e),method:"get"});N.head=e=>({action:i.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});i.form=N;const l=(e,t)=>({url:l.url(e,t),method:"get"});l.definition={methods:["get","head"],url:"/verify-email/{id}/{hash}"};l.url=(e,t)=>{Array.isArray(e)&&(e={id:e[0],hash:e[1]}),e=R(e);const s={id:e.id,hash:e.hash};return l.definition.url.replace("{id}",s.id.toString()).replace("{hash}",s.hash.toString()).replace(/\/+$/,"")+x(t)};l.get=(e,t)=>({url:l.url(e,t),method:"get"});l.head=(e,t)=>({url:l.url(e,t),method:"head"});const A=(e,t)=>({action:l.url(e,t),method:"get"});A.get=(e,t)=>({action:l.url(e,t),method:"get"});A.head=(e,t)=>({action:l.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});l.form=A;const o=e=>({url:o.url(e),method:"post"});o.definition={methods:["post"],url:"/email/verification-notification"};o.url=e=>o.definition.url+x(e);o.post=e=>({url:o.url(e),method:"post"});const D=e=>({action:o.url(e),method:"post"});D.post=e=>({action:o.url(e),method:"post"});o.form=D;Object.assign(i,i),Object.assign(l,l),Object.assign(o,o);function ge(){const e=F.useRef(null);return a.jsxs("div",{className:"space-y-6",children:[a.jsx(C,{title:"Hapus Akun",description:"Hapus akun Anda dan semua datanya"}),a.jsxs("div",{className:"space-y-4 rounded-lg border border-red-100 bg-red-50 p-4 dark:border-red-200/10 dark:bg-red-700/10",children:[a.jsxs("div",{className:"relative space-y-0.5 text-red-600 dark:text-red-100",children:[a.jsx("p",{className:"font-medium",children:"Peringatan"}),a.jsx("p",{className:"text-sm",children:"Harap berhati-hati, tindakan ini tidak dapat dibatalkan."})]}),a.jsxs(M,{children:[a.jsx(V,{asChild:!0,children:a.jsx(f,{variant:"destructive","data-test":"delete-user-button",children:"Hapus Akun"})}),a.jsxs($,{children:[a.jsx(J,{children:"Apakah Anda yakin ingin menghapus akun Anda?"}),a.jsx(X,{children:"Setelah akun Anda dihapus, semua data dan sumber daya akan dihapus secara permanen. Silakan masukkan kata sandi Anda untuk mengkonfirmasi bahwa Anda ingin menghapus akun Anda secara permanen."}),a.jsx(U,{...w.destroy.form(),options:{preserveScroll:!0},onError:()=>e.current?.focus(),resetOnSuccess:!0,className:"space-y-6",children:({resetAndClearErrors:t,processing:s,errors:y})=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(p,{htmlFor:"password",className:"sr-only",children:"Kata Sandi"}),a.jsx(j,{id:"password",type:"password",name:"password",ref:e,placeholder:"Kata sandi",autoComplete:"current-password"}),a.jsx(h,{message:y.password})]}),a.jsxs(W,{className:"gap-2",children:[a.jsx(Z,{asChild:!0,children:a.jsx(f,{variant:"secondary",onClick:()=>t(),children:"Batal"})}),a.jsx(f,{variant:"destructive",disabled:s,asChild:!0,children:a.jsx("button",{type:"submit","data-test":"confirm-delete-user-button",children:"Hapus Akun"})})]})]})})]})]})]})]})}const fe=[{title:"Pengaturan Profil",href:ae().url}],xe=new Date().getFullYear(),je=Array.from({length:xe-1999+1},(e,t)=>(2e3+t).toString());function Ye({mustVerifyEmail:e,status:t}){const{auth:s}=B().props,[y,_]=F.useState(null),{data:u,setData:c,post:Q,processing:q,errors:g,recentlySuccessful:H}=z({name:s.user.name,email:s.user.email,angkatan:s.user.angkatan||"",profesi:s.user.profesi||"",bio:s.user.bio||"",profile_picture:null,_method:"PATCH"}),E=r=>{const v=r.target.files?.[0];if(v){c("profile_picture",v);const k=new FileReader;k.onloadend=()=>{_(k.result)},k.readAsDataURL(v)}},I=()=>{_(null),c("profile_picture",null);const r=document.getElementById("profile_picture");r&&(r.value="")},T=y||s.user.profile_picture_url||null,L=r=>{r.preventDefault(),Q(w.update.url(),{preserveScroll:!0,forceFormData:!0})};return a.jsxs(ee,{breadcrumbs:fe,children:[a.jsx(K,{title:"Pengaturan Profil"}),a.jsxs(G,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx(C,{title:"Informasi Profil",description:"Perbarui nama, email, dan foto profil Anda"}),a.jsxs("form",{onSubmit:L,className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(p,{htmlFor:"profile_picture",children:"Foto Profil"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(re,{className:"h-20 w-20",children:[a.jsx(te,{src:T||"",alt:s.user.name}),a.jsx(se,{children:s.user.name.split(" ").map(r=>r[0]).join("").toUpperCase().slice(0,2)})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(f,{type:"button",variant:"outline",size:"sm",onClick:()=>document.getElementById("profile_picture")?.click(),children:[a.jsx(pe,{className:"h-4 w-4"}),"Pilih Foto"]}),(y||s.user.profile_picture_url)&&a.jsxs(f,{type:"button",variant:"outline",size:"sm",onClick:I,children:[a.jsx(ie,{className:"h-4 w-4"}),"Hapus"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"JPG, PNG atau GIF (maksimal 2MB)"})]})]}),a.jsx(j,{id:"profile_picture",type:"file",name:"profile_picture",accept:"image/jpeg,image/jpg,image/png,image/gif",onChange:E,className:"hidden"}),a.jsx(h,{className:"mt-2",message:g.profile_picture})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(p,{htmlFor:"name",children:"Nama"}),a.jsx(j,{id:"name",className:"mt-1 block w-full",value:u.name,onChange:r=>c("name",r.target.value),required:!0,autoComplete:"name",placeholder:"Nama lengkap"}),a.jsx(h,{className:"mt-2",message:g.name})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(p,{htmlFor:"email",children:"Alamat Email"}),a.jsx(j,{id:"email",type:"email",className:"mt-1 block w-full",value:u.email,onChange:r=>c("email",r.target.value),required:!0,autoComplete:"username",placeholder:"Alamat email"}),a.jsx(h,{className:"mt-2",message:g.email})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(p,{htmlFor:"angkatan",children:"Tahun Lulus (Angkatan)"}),a.jsxs(le,{name:"angkatan",value:typeof u.angkatan=="string"?u.angkatan:"",onValueChange:r=>c("angkatan",r),children:[a.jsx(ne,{id:"angkatan",children:a.jsx(oe,{placeholder:"Pilih tahun lulus"})}),a.jsx(de,{children:je.reverse().map(r=>a.jsx(me,{value:r,children:r},r))})]}),a.jsx(h,{className:"mt-2",message:g.angkatan})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(p,{htmlFor:"profesi",children:"Profesi"}),a.jsx(j,{id:"profesi",className:"mt-1 block w-full",value:typeof u.profesi=="string"?u.profesi:"",onChange:r=>c("profesi",r.target.value),autoComplete:"organization-title",placeholder:"Psikolog, Konselor, dll"}),a.jsx(h,{className:"mt-2",message:g.profesi})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(p,{htmlFor:"bio",children:"Bio"}),a.jsx(ue,{id:"bio",className:"mt-1 block w-full",value:typeof u.bio=="string"?u.bio:"",onChange:r=>c("bio",r.target.value),placeholder:"Ceritakan sedikit tentang Anda...",rows:4}),a.jsx(h,{className:"mt-2",message:g.bio})]}),e&&s.user.email_verified_at===null&&a.jsxs("div",{children:[a.jsxs("p",{className:"-mt-4 text-sm text-muted-foreground",children:["Alamat email Anda belum terverifikasi."," ",a.jsx(O,{href:o(),as:"button",className:"text-foreground underline decoration-neutral-300 underline-offset-4 transition-colors duration-300 ease-out hover:decoration-current! dark:decoration-neutral-500",children:"Klik di sini untuk mengirim ulang email verifikasi."})]}),t==="verification-link-sent"&&a.jsx("div",{className:"mt-2 text-sm font-medium text-green-600",children:"Link verifikasi baru telah dikirim ke alamat email Anda."})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(f,{type:"submit",disabled:q,"data-test":"update-profile-button",children:"Simpan"}),a.jsx(ce,{show:H,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:a.jsx("p",{className:"text-sm text-neutral-600",children:"Tersimpan"})})]})]})]}),a.jsx(ge,{})]})]})}export{Ye as default};
