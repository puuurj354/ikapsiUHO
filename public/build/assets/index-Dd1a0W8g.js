import{a as c,u as J,j as e,H as U,r as d}from"./app-BuK6L1IX.js";import{B as b}from"./badge-BysjlmGz.js";import{B as o}from"./createLucideIcon-C0J_jlnb.js";import{C as t,a as l,b as W,c as Y,d as Z}from"./card-BF-Pn31m.js";import{D as ee,a as se,b as ae,c as te,d as le,e as re}from"./dialog-gwn2CuJO.js";import{A as ie,D as ne,a as ce,b as de,c as j,d as G}from"./app-layout-CHXXplpD.js";import{I as oe}from"./input-f5A2Fz8u.js";import{L as me}from"./label-LgJCqWNF.js";import{S as C,a as y,b as S,c as k,d as r}from"./select-CwGAG6Ap.js";import{T as xe}from"./textarea-j8VOJUz_.js";import{S as I}from"./search-D7hJGz7l.js";import{I as ue}from"./image-ae-2JA6f.js";import{E as he}from"./ellipsis-vertical-DAVv6Esc.js";import{E as B}from"./eye-DMVwzdKU.js";import{C as _}from"./circle-check-D-aLGh35.js";import{C as P}from"./circle-x-Quvii8nm.js";import{T as pe}from"./trash-2-f7MI_fWU.js";import{C as je}from"./clock-drXSsSib.js";/* empty css            */import"./index-C4OLRmRE.js";import"./index-D0EEU-p-.js";import"./index-B4K8fLkS.js";import"./index-CC6k_cLp.js";import"./index-CQZ_tyeG.js";import"./index-DWHlQ5VI.js";import"./index-CeB0vAsL.js";import"./icon-36yQIlH0.js";import"./index-4Ns3tNZl.js";import"./app-logo-icon-D6cuaaKn.js";import"./calendar-BSWEor3k.js";import"./loader-circle-BZdVFMY_.js";import"./index-NM6RjGmS.js";import"./chevron-down-CMB5mX-t.js";function Ue({galleries:x,statistics:i,batches:E,filters:u}){const H=[{title:"Dashboard",href:"/dashboard"},{title:"Admin",href:"#"},{title:"Manajemen Galeri",href:"/admin/gallery"}],[w,D]=c.useState(u.search||""),[g,T]=c.useState(u.status||"all"),[f,A]=c.useState(u.type||"all"),[v,F]=c.useState(u.batch||"all"),[N,M]=c.useState(null),[L,h]=c.useState(!1),a=J({reason:""}),R=s=>{s.preventDefault(),p()},p=()=>{d.get("/admin/gallery",{search:w||void 0,status:g!=="all"?g:void 0,type:f!=="all"?f:void 0,batch:v!=="all"?v:void 0},{preserveState:!0,preserveScroll:!0})},$=s=>{confirm("Apakah Anda yakin ingin menyetujui galeri ini?")&&d.post(`/admin/gallery/${s}/approve`,{},{preserveScroll:!0})},V=s=>{M(s),h(!0)},O=()=>{N&&a.post(`/admin/gallery/${N.id}/reject`,{preserveScroll:!0,onSuccess:()=>{h(!1),a.reset(),M(null)}})},z=(s,m)=>{confirm(`Apakah Anda yakin ingin menghapus galeri "${m}"? Aksi ini tidak dapat dibatalkan.`)&&d.delete(`/admin/gallery/${s}`,{preserveScroll:!0})},Q=s=>{const n={pending:{label:"Menunggu",variant:"secondary",icon:je},approved:{label:"Disetujui",variant:"default",icon:_},rejected:{label:"Ditolak",variant:"destructive",icon:P}}[s],q=n.icon;return e.jsxs(b,{variant:n.variant,className:"gap-1",children:[e.jsx(q,{className:"h-3 w-3"}),n.label]})},K=s=>{const n={personal:{label:"Pribadi",className:"bg-blue-100 text-blue-800 hover:bg-blue-100"},public:{label:"Publik",className:"bg-purple-100 text-purple-800 hover:bg-purple-100"}}[s];return e.jsx(b,{className:n.className,children:n.label})},X=s=>new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"});return e.jsxs(ie,{breadcrumbs:H,children:[e.jsx(U,{title:"Manajemen Galeri"}),e.jsxs("div",{className:"mx-auto w-full max-w-7xl space-y-6 px-4 py-6 md:px-6",children:[e.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Manajemen Galeri"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Kelola dan setujui galeri yang diunggah alumni"})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-6",children:[e.jsx(t,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",children:i.total})]})})}),e.jsx(t,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Menunggu"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:i.pending})]})})}),e.jsx(t,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Disetujui"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:i.approved})]})})}),e.jsx(t,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Ditolak"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:i.rejected})]})})}),e.jsx(t,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Publik"}),e.jsx("p",{className:"text-2xl font-bold",children:i.public})]})})}),e.jsx(t,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pribadi"}),e.jsx("p",{className:"text-2xl font-bold",children:i.personal})]})})})]}),e.jsxs(t,{children:[e.jsxs(W,{children:[e.jsx(Y,{children:"Filter Galeri"}),e.jsx(Z,{children:"Cari dan filter galeri"})]}),e.jsx(l,{children:e.jsxs("form",{onSubmit:R,className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(oe,{placeholder:"Cari judul, alumni...",value:w,onChange:s=>D(s.target.value),className:"pl-9"})]}),e.jsxs(C,{value:g,onValueChange:s=>{T(s),setTimeout(p,0)},children:[e.jsx(y,{children:e.jsx(S,{placeholder:"Status"})}),e.jsxs(k,{children:[e.jsx(r,{value:"all",children:"Semua Status"}),e.jsx(r,{value:"pending",children:"Menunggu"}),e.jsx(r,{value:"approved",children:"Disetujui"}),e.jsx(r,{value:"rejected",children:"Ditolak"})]})]}),e.jsxs(C,{value:f,onValueChange:s=>{A(s),setTimeout(p,0)},children:[e.jsx(y,{children:e.jsx(S,{placeholder:"Tipe"})}),e.jsxs(k,{children:[e.jsx(r,{value:"all",children:"Semua Tipe"}),e.jsx(r,{value:"personal",children:"Pribadi"}),e.jsx(r,{value:"public",children:"Publik"})]})]}),e.jsxs(C,{value:v,onValueChange:s=>{F(s),setTimeout(p,0)},children:[e.jsx(y,{children:e.jsx(S,{placeholder:"Angkatan"})}),e.jsxs(k,{children:[e.jsx(r,{value:"all",children:"Semua Angkatan"}),E.map(s=>e.jsx(r,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{type:"submit",className:"flex-1",children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Cari"]}),e.jsx(o,{type:"button",variant:"outline",onClick:()=>{D(""),T("all"),A("all"),F("all"),d.get("/admin/gallery",{},{preserveState:!0})},children:"Reset"})]})]})})]}),x.data.length===0?e.jsx(t,{children:e.jsxs(l,{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(ue,{className:"mb-4 h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:"Belum Ada Galeri"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Galeri yang diunggah alumni akan muncul di sini"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:x.data.map(s=>e.jsxs(t,{className:"overflow-hidden",children:[e.jsxs("div",{className:"relative aspect-video w-full overflow-hidden bg-muted",children:[e.jsx("img",{src:s.image_url,alt:s.title,className:"h-full w-full object-cover"}),s.deleted_at&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60",children:e.jsx(b,{variant:"destructive",children:"Dihapus"})})]}),e.jsxs(l,{className:"p-4",children:[e.jsxs("div",{className:"mb-3 flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"mb-1 line-clamp-1 font-semibold",children:s.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Oleh: ",s.user.name,s.user.angkatan&&` (${s.user.angkatan})`]})]}),!s.deleted_at&&e.jsxs(ne,{children:[e.jsx(ce,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(he,{className:"h-4 w-4"})})}),e.jsxs(de,{align:"end",children:[e.jsxs(j,{onClick:()=>d.visit(`/admin/gallery/${s.id}`),children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Lihat Detail"]}),s.type==="public"&&s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(G,{}),e.jsxs(j,{onClick:()=>$(s.id),className:"text-green-600 focus:text-green-600",children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Setujui"]}),e.jsxs(j,{onClick:()=>V(s),className:"text-yellow-600 focus:text-yellow-600",children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Tolak"]})]}),e.jsx(G,{}),e.jsxs(j,{onClick:()=>z(s.id,s.title),className:"text-destructive focus:text-destructive",children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),"Hapus"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[K(s.type),Q(s.status)]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.views_count," ","views"]})]}),e.jsx("span",{children:X(s.created_at)})]}),s.batch&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Angkatan: ",s.batch]})]})]})]},s.id))}),x.last_page>1&&e.jsx("div",{className:"flex items-center justify-center gap-2",children:x.links.map((s,m)=>e.jsx(o,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>{s.url&&d.visit(s.url)},dangerouslySetInnerHTML:{__html:s.label}},m))})]})]}),e.jsx(ee,{open:L,onOpenChange:h,children:e.jsxs(se,{children:[e.jsxs(ae,{children:[e.jsx(te,{children:"Tolak Galeri"}),e.jsxs(le,{children:['Berikan alasan penolakan untuk galeri "',N?.title,'"']})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{htmlFor:"reason",children:"Alasan Penolakan"}),e.jsx(xe,{id:"reason",placeholder:"Contoh: Foto tidak relevan dengan tema galeri alumni...",value:a.data.reason,onChange:s=>a.setData("reason",s.target.value),rows:4,className:a.errors.reason?"border-destructive":""}),a.errors.reason&&e.jsx("p",{className:"text-sm text-destructive",children:a.errors.reason})]})}),e.jsxs(re,{children:[e.jsx(o,{variant:"outline",onClick:()=>{h(!1),a.reset()},disabled:a.processing,children:"Batal"}),e.jsx(o,{variant:"destructive",onClick:O,disabled:a.processing||!a.data.reason,children:a.processing?"Memproses...":"Tolak Galeri"})]})]})})]})}export{Ue as default};
